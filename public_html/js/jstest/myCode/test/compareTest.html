<!DOCTYPE html>
<html>
    <head>
        <title>Comparison Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="../../../jquery-3.1.1.js"></script>
        <script src="../obj.js"></script>
        <script src="../unitTest.js"></script>

    </head>
    <body>
        <h1>This is a JS Test</h1>
        <button name="b1" id="show">Click me!</button>
        <p></p>
        <div id="demo"></div>
        <script></script>
        <script>
            try {
                function Person(name) {
                    this.name = name;
                    this.walk = function () {
                        return this.name + " is walking.";
                    };
                }
                Person.prototype.run = function () {
                    return this.name + " is running.";
                };
                Person.prototype.sayHello = function () {
                    return "Hello, my name is " + this.name + ".";
                };
                function Employee(name, title) {
                    Person.call(this, name);
                    this.title = title;
                }
                Employee.prototype = Object.create(Person.prototype);
                Employee.prototype.constructor = Employee;
                Employee.prototype.sayHello = function () {
                    return "Hello, my name is " + this.name + ", I'm the " + this.title + ".";
                };

                var jane = new Employee("Jane", "Teacher");
                var testf;
                var ctr = 1;
                var expected;
                // test start - 1  owned inenumerable properties
                {
                    console.log("test start - (1)  owned inenumerable properties");
                    let a = Object.create({}, {
                        name: {
                            value: "Jack",
                            writable: true,
                            enumerable: false,
                            configurable: true
                        },
                        title: {
                            value: "Manager",
                            writable: true,
                            enumerable: false,
                            configurable: true
                        }
                    });
                    let b = Object.create({});
                    ctr = 1;
                    expected = {value: false};
                    ctr = test1(this, "compareContent", [a, b, true], expected, ctr); // 1
                    expected = {value: true}; // Failed ?
                    ctr = test1(this, "compareContent", [a, b], expected, ctr); // 2
                    ctr = test1(this, "deepCompare", [a, b], expected, ctr); // 3
                    console.log("test end - (1)");
                }
                // test end - 1
//                a = 015;
//                alert(typeof +a); // number
//                alert(+a); // 15
//                alert(String(+a));
                // test start - 2
                {
                    console.log("test start - (2)");
                    let c = function () {};
                    c.prototype = Object.create(jane);
                    c.prototype.constructor = c;
                    let ci = new c();
                    let d = function () {};
                    //d.prototype = Object.create({a: 2});
                    d.prototype = Object.create(null);
                    //d.prototype = Object.create({});
                    d.prototype.constructor = d;
                    let di = new d();
                    ctr = 1;

                    expected = {value: false};
                    ctr = test1(this, "compareContent", [ci, jane], expected, ctr); // 1
                    ctr = test1(this, "deepCompare", [ci, jane], expected, ctr); // 2

                    expected = {error: "Number expected"};
                    ctr = test1(this, "deepCompare", [c.prototype, d.prototype], expected, ctr); // 3

                    expected = {value: false};                    
                    ctr = test1(this, "compareContent", [c, d, true], expected, ctr); // 4                                       
                    ctr = test1(this, "compareContent", [ci, di, true], expected, ctr); // 5                   
                    expected = {value: true}; // Failed ?
                    ctr = test1(this, "compareContent", [c, d], expected, ctr); // 6 
                    ctr = test1(this, "deepCompare", [c, d], expected, ctr); // 7 
                    ctr = test1(this, "compareContent", [ci, di], expected, ctr); // 8 
                    expected = {error: "Number expected"}; // Failed ?
                    ctr = test1(this, "deepCompare", [ci, di], expected, ctr); // 9
                    
                    expected = {value: true};
                    ctr = test1(this, "compareContent", [ci.__proto__, c.prototype], expected, ctr); // 10
                    ctr = test1(this, "compareContent", [ci.__proto__, c.prototype, true], expected, ctr); // 11
                    ctr = test1(this, "deepCompare", [ci.__proto__, c.prototype], expected, ctr); // 12            
                    ctr = test1(this, "compareContent", [Object.create(null), Object.create(null)], expected, ctr); // 13
                    ctr = test1(this, "compareContent", [Object.create(null), Object.create(null), true], expected, ctr); // 14                                   
                    expected = {value: false}; // Failed ?                    
                    ctr = test1(this, "compareContent", [di.__proto__, d.prototype], expected, ctr); // 15
                    ctr = test1(this, "compareContent", [di.__proto__, d.prototype, true], expected, ctr); // 16                     
                    expected = {error: "Number expected"}; // Failed ?
                    ctr = test1(this, "deepCompare", [di.__proto__, d.prototype], expected, ctr); // 17                   
                    ctr = test1(this, "deepCompare", [Object.create(null), Object.create(null), true], expected, ctr); // 18
                    
                    expected = {value: false};
                    ctr = test1(this, "compareContent", [undefined, Object.create(null), true], expected, ctr); // 19 
                    expected = {error: "Number expected"}; // Failed ?
                    ctr = test1(this, "deepCompare", [undefined, Object.create(null), true], expected, ctr); // 20  
                    console.log("test end - (2)");
                }
                // test end - 2

                // test start - 3
                {
                    console.log("test start - (3)");
                    let e = Object.create({name: "Jack", title: "Manager"});
                    let f = Object.create({name: "Jack"}, {
                        title: {
                            value: "Manager",
                            writable: true,
                            enumerable: true,
                            configurable: true
                        }
                    });
                    let g = Object.create({title: "Manager"}, {
                        name: {
                            value: "Jack",
                            writable: true,
                            enumerable: true,
                            configurable: true
                        }
                    });
                    let h = Object.create({}, {
                        name: {
                            value: "Jack",
                            writable: true,
                            enumerable: true,
                            configurable: true
                        },
                        title: {
                            value: "Manager",
                            writable: true,
                            enumerable: true,
                            configurable: true
                        }
                    });

                    output = undefined;
                    ctr = 1;
                    expected = {value: false};
                    let inputlist1 = [
                        [e, f],
                        [e, g],
                        [e, h],
                        [f, g],
                        [f, h],
                        [g, h]
                    ];
                    let inputlist2 = [
                        [e, f, true],
                        [e, g, true],
                        [e, h, true],
                        [f, g, true],
                        [f, h, true],
                        [g, h, true]
                    ];

                    ctr = testM(this, "compareContent", inputlist1, expected, ctr);
                    ctr = testM(this, "compareContent", inputlist2, expected, ctr);
                    ctr = testM(this, "deepCompare", inputlist1, expected, ctr);
                    console.log("test end - (3)");
                }
                // test end - 3
                // test start - 4
                {
                    console.log("test start - (4)");
                    let a = {a: 1, b: 2, c: 3}, b = {a: 1, b: 2, c: 3};
                    ctr = 1;
                    expected = {value: true};
                    ctr = test1(this, "compareContent", [a, b], expected, ctr); // 1
                    ctr = test1(this, "compareContent", [a, b, true], expected, ctr); // 2
                    ctr = test1(this, "deepCompare", [a, b], expected, ctr); // 3
                    a.prototype = {d: 4};
                    b.prototype = {d: 4};
                    expected = {value: true};
                    ctr = test1(this, "compareContent", [a, b], expected, ctr); // 4
                    ctr = test1(this, "compareContent", [a, b, true], expected, ctr); // 5
                    expected = {value: false}; // Failed ?
                    ctr = test1(this, "deepCompare", [a, b], expected, ctr); // 6
                    let m = function () {
                        alert("HI");
                    };
                    let n = function () {
                        alert("HI");
                    };

                    expected = {value: true};
                    ctr = test1(this, "compareContent", [m.prototype, n.prototype], expected, ctr); // 7
                    ctr = test1(this, "compareContent", [m.prototype, n.prototype, true], expected, ctr); // 8
                    ctr = test1(this, "compareContent", [m.prototype.constructor, m, true], expected, ctr); // 9
                    ctr = test1(this, "compareContent", [m.constructor, n.constructor, true], expected, ctr); // 10
                    ctr = test1(this, "compareContent", [m.constructor, function(){}.constructor, true], expected, ctr); // 11
                    expected = {value: false}; // Failed ?
                    ctr = test1(this, "deepCompare", [m.prototype, n.prototype], expected, ctr); // 12

                    let x = Object.create(Object.prototype);
                    let y = Object.prototype;
                    let z = {};
                    x.constructor = m;
                    //y.constructor = m;
                    z.constructor = m;
                    expected = {value: false};
                    ctr = test1(this, "compareContent", [m.prototype, x, true], expected, ctr); // 13
                    ctr = test1(this, "compareContent", [m.prototype, y, true], expected, ctr); // 14
                    ctr = test1(this, "compareContent", [m.prototype, z, true], expected, ctr); // 15

//                    console.dir(m.prototype);
//                    console.dir(z);

                    let q = {a: 1};
                    expected = {value: true};
                    ctr = test1(this, "compareContent", [q.constructor, {}.constructor, true], expected, ctr); // 16
                    ctr = test1(this, "compareContent", [function(){}.prototype, function(){}.prototype, true], expected, ctr); // 17
                    ctr = test1(this, "compareContent", [function(){}.prototype.constructor, function(){}.prototype.constructor, true], expected, ctr); // 18
                    
                    console.log("test end - (4)");
                }
                // test end - 4
                //console.dir(Person);
                // test start - 5
                {
                    console.log("test start - (5)");
                    expected = {value: true};
                    ctr = 1;
                    ctr = test1(this, "compareContent", [jane.__proto__.__proto__.__proto__, Object.prototype, true], expected, ctr); // 1
                    ctr = test1(this, "compareContent", [Object.prototype.__proto__, {}, true], expected, ctr); // 2
                    ctr = test1(this, "compareContent", [Object.prototype.__proto__, null, true], expected, ctr); // 3
                    ctr = test1(this, "compareContent", [Object.prototype.__proto__, {a: 1}, true], expected, ctr); // 4
                    ctr = test1(this, "compareContent", [null, {a: 1}, true], expected, ctr); // 5
                    ctr = test1(this, "deepCompare", [null, {a: 1}], expected, ctr); // 6
                    console.log(Object.prototype.__proto__ === null);
                    console.log(jane.__proto__.__proto__.__proto__ === Object.prototype);
                    console.log("__proto__" in jane);
                    console.log("__proto__" in Object.prototype);
                    console.log("__proto__" in Object.create(null));
                    console.log(Person.sleep);
                    console.log(isNaN(null));
                    console.log(isNaN({a: 1}));
                    
                    //console.log(isNaN(Object.create(null)));
                    // Object.create(null)
                    console.log(typeof ({}.__proto__.__proto__));
                    console.dir(Object.prototype);
                    
                    console.log("test end - (5)");
                }
                // test end - 5

                // test start - 6
                {

                }
                // test end - 6

            } catch (err) {
                alert(err.message);
            }

            $(document).ready(function () {
                try {
                    txt = "Hello, World!";

                    $("#show").on("click", function () {
                        $("#demo").html(txt);
                    });
                } catch (err) {
                    alert(err.message);
                }
            });
        </script>

    </body>
</html>
