<!DOCTYPE html>
<html>
    <head>
        <title>Comparison Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="../../../jquery-3.1.1.js"></script>
        <script src="../obj.js"></script>
        <script src="../unitTest.js"></script>

    </head>
    <body>
        <h1>This is a JS Test</h1>
        <button name="b1" id="show">Click me!</button>
        <p></p>
        <div id="demo"></div>
        <script></script>
        <script>
            try {
                function Person(name) {
                    this.name = name;
                    this.walk = function () {
                        return this.name + " is walking.";
                    };
                }
                Person.prototype.run = function () {
                    return this.name + " is running.";
                };
                Person.prototype.sayHello = function () {
                    return "Hello, my name is " + this.name + ".";
                };
                function Employee(name, title) {
                    Person.call(this, name);
                    this.title = title;
                }
                Employee.prototype = Object.create(Person.prototype);
                Employee.prototype.constructor = Employee;
                Employee.prototype.sayHello = function () {
                    return "Hello, my name is " + this.name + ", I'm the " + this.title + ".";
                };

                var jane = new Employee("Jane", "Teacher");
                var testf;
                var ctr = 1;
                var expected;
                // test start - 1  owned inenumerable properties
                console.log("test start - (1)  owned inenumerable properties");
                let a = Object.create({}, {
                    name: {
                        value: "Jack",
                        writable: true,
                        enumerable: false,
                        configurable: true
                    },
                    title: {
                        value: "Manager",
                        writable: true,
                        enumerable: false,
                        configurable: true
                    }
                });
                let b = Object.create({});
                ctr = 1;
                expected = false;
                ctr = test1(this, "compareContent", [a, b], expected, ctr);
                ctr = test1(this, "compareContent", [a, b, true], expected, ctr);
                ctr = test1(this, "deepCompare", [a, b], expected, ctr);
                console.log("test end - (1)");
                // test end - 1

                // test start - 2
                console.log("test start - (2)");
                let c = function () {};
                c.prototype = Object.create(jane);
                c.prototype.constructor = c;
                let ci = new c();
                let d = function () {};
                //d.prototype = Object.create({a: 2});
                d.prototype = Object.create(null);
                //d.prototype = Object.create({});
                d.prototype.constructor = d;
                let di = new d();
                
                ctr = 1;
                expected = "Hello, my name is Jane, I'm the Teacher.";
                ctr = test1(ci, "sayHello", null, expected, ctr);
                expected = "Jane is running.";
                ctr = test1(ci, "run", null, expected, ctr);
                expected = "Jane is walking.";
                ctr = test1(ci, "walk", null, expected, ctr);
                
                expected = true;
                ctr = test1(jane, "isPrototypeOf", [ci], expected, ctr);             
                expected = "function () {}";
                ctr = test1(c.prototype.constructor, "toString", null, expected, ctr);
               
                testf = function(){return c.constructor === Function;};
                expected = true;
                ctr = test1(this, "testf", null, expected, ctr);
                
                expected = false;
                ctr = test1(this, "compareContent", [ci, jane], expected, ctr);
                ctr = test1(this, "deepCompare", [ci, jane], expected, ctr);
                
                testf = function(){return Object.create(null) === null;};
                expected = false;
                ctr = test1(this, "testf", null, expected, ctr);
                //alert(typeof Object.create(null)); // output: object
                
                expected = {error: "'obj[func]' - undefined or illegal type"};
                ctr = test1(d.prototype, "isPrototypeOf", [null], expected, ctr);
                
                //d.prototype.isPrototypeOf(null);// throw an error: Object doesn't support property or method 'isPrototypeOf'
                //d.prototype.hasOwnProperty("a");// throw an error: Object doesn't support property or method 'hasOwnProperty'
                //alert(d.prototype.isPrototypeOf); //output: undefined
                //alert(d.prototype.hasOwnProperty); //output: undefined
                //alert(c.prototype === d.prototype); // output: false
                //alert(compareObj(c.prototype, d.prototype)); // output: true   
                //alert(compareContent(c.prototype, d.prototype)); // output: true
                //alert(compareContent(c.prototype, d.prototype, true)); // output: false
                //enumerable "constructor"
                //alert(JSON.stringify(Object.keys(c.prototype))); // output: ["constructor"]
                //alert(JSON.stringify(Object.keys({}))); // output: []
                //alert(({}.constructor).toString()); // output: []
                //alert(deepCompare(c.prototype, d.prototype)); // output: false //throw an error: Number Expected
                
                //alert(c.prototype.isPrototypeOf(d.prototype)); // output: false
                //alert(c.prototype.isPrototypeOf(d.prototype)); // throw an error: Object doesn't support property or method 'isPrototypeOf'
                
                //alert(deepCompare(c.prototype, d.prototype));  // throw an error: Number Expected
                //alert(c.prototype.constructor); // the output is the Employee's constructor
                //alert(d.prototype.constructor); // output: undefined
                //alert(c === d); // output: false
                //alert(compareObj(c, d)); // output: true 
                //alert(compareContent(c, d, true)); // output: false 
                //alert(deepCompare(c, d)); // output: true       
                //alert(compareObj(ci, di)); // output: true 
                //alert(compareContent(ci, di, true)); // output: false 
                //alert(deepCompare(ci, di)); // output: false 
                //alert(ci.constructor.toString());         
                //alert(di.constructor.toString());     
                console.log("test end - (2)");       
                // test end - 2

                // test start - 3
                console.log("test start - (3)");
                let e = Object.create({name: "Jack", title:"Manager"});
                let f = Object.create({name: "Jack"}, {
                    title: {
                        value: "Manager",
                        writable: true,
                        enumerable: true,
                        configurable: true
                    }
                });
                let g = Object.create({title:"Manager"}, {
                    name: {
                        value: "Jack",
                        writable: true,
                        enumerable: true,
                        configurable: true
                    }
                });
                let h = Object.create({}, {
                    name: {
                        value: "Jack",
                        writable: true,
                        enumerable: true,
                        configurable: true
                    },
                    title: {
                        value: "Manager",
                        writable: true,
                        enumerable: true,
                        configurable: true
                    }
                });
                
                output = undefined;
                ctr = 1;
                expected = false;
                let inputlist1 = [
                    [e, f],
                    [e, g],
                    [e, h],
                    [f, g],
                    [f, h],
                    [g, h]
                ];
                let inputlist2 = [
                    [e, f, true],
                    [e, g, true],
                    [e, h, true],
                    [f, g, true],
                    [f, h, true],
                    [g, h, true]
                ];
                
                ctr = testMI(this, "compareContent", inputlist1, expected, ctr);
                ctr = testMI(this, "compareContent", inputlist2, expected, ctr);
                ctr = testMI(this, "deepCompare", inputlist1, expected, ctr);
                console.log("test end - (3)");
                // test end - 3
                
                // test start - 2
                
                // test end - 2

            } catch (err) {
                alert(err.message);
            }

            $(document).ready(function () {
                try {
                    txt = "Hello, World!";

                    $("#show").on("click", function () {
                        $("#demo").html(txt);
                    });
                } catch (err) {
                    alert(err.message);
                }
            });
        </script>

    </body>
</html>
